{"ast":null,"code":"var _jsxFileName = \"/Users/prashanthpujar/Documents/Coursework/Web Technologies/Assignments/Homework 6/Backups/Experiment/client/src/components/searchResults.js\";\nimport React, { useState, useEffect, memo } from 'react';\nimport { Card, Col, Row, Badge, Modal, Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport './search.css';\nimport './detailed_page.css';\nimport axios from 'axios';\nimport BounceLoader from \"react-spinners/BounceLoader\";\nimport { FacebookShareButton, TwitterShareButton, EmailShareButton } from 'react-share';\nimport { EmailIcon, FacebookIcon, TwitterIcon } from 'react-share';\nimport { IoMdShare } from 'react-icons/io';\nimport { connect } from 'react-redux';\n\nconst SearchResults = props => {\n  const [searchResults, setResults] = useState([]);\n  const [newsAvailable, setNewsAvailable] = useState(false);\n  const [activeItem, getActiveItem] = useState(\"\");\n  const [isopenModal, changeModalState] = useState(false); // const [searchWord, setSearchWord] = useState(\"\")\n  // setSearchWord(searchWord)\n\n  const fetchData = () => {\n    if (props.whichNews === 'guardian' || props.whichNews === 'Guardian') {\n      let url = 'http://localhost:5000/searchResults/' + props.match.params.option;\n      axios.get(url).then(responseData => {\n        setResults(responseData.data);\n        setNewsAvailable(true);\n      }).catch(responseData => {\n        console.log(\"ERROR from Search Results\");\n      });\n    } else {\n      let url = 'http://localhost:5000/searchResults/nytimes/' + props.match.params.option;\n      axios.get(url).then(responseData => {\n        // console.log(\"NYT search\", responseData.data.docs)\n        setResults(responseData.data.docs);\n        setNewsAvailable(true);\n      }).catch(responseData => {\n        console.log(\"ERROR from Search Results\");\n      });\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, [props.match.params.option]); // Handling modal for sharing\n\n  const handleClose = () => {\n    changeModalState(false);\n  };\n\n  const handleOpen = (title, weburl) => {\n    console.log(\"Calling hanfleopen\");\n    let sharedata = {\n      title: title,\n      webUrl: weburl\n    };\n    getActiveItem(sharedata);\n    changeModalState(true);\n  };\n\n  if (!newsAvailable) {\n    return React.createElement(\"div\", {\n      className: \"sweet-loading\",\n      style: {\n        position: 'fixed',\n        top: '50%',\n        left: '47%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(BounceLoader, {\n      style: {\n        display: 'block',\n        background: '#2b4fc4'\n      },\n      size: 35,\n      color: \"#2b4fc4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: {\n        position: 'fixed',\n        left: '46.5%',\n        fontSize: '14px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Loading\"));\n  } else {\n    if (props.whichNews === 'guardian' || props.whichNews === 'Guardian') {\n      const newsCards = searchResults.map(news => {\n        // const newsBadge = news.sectionId.toUpperCase();\n        let color = \"\";\n        let text_color = \"white\";\n\n        if (news.sectionId == 'sport' || news.sectionId == 'Sport') {\n          color = '#f6c244';\n          text_color = 'black';\n        } else if (news.sectionId == 'world' || news.sectionId == 'World') {\n          color = '#7c4eff';\n        } else if (news.sectionId == 'technology' || news.sectionId == 'Technology') {\n          color = '#cedc39';\n          text_color = 'black';\n        } else if (news.sectionId == 'politics' || news.sectionId == 'Politics') {\n          color = '#419488';\n        } else if (news.sectionId == 'business' || news.sectionId == 'Business') {\n          color = '#4696ec';\n        } else {\n          color = '#6e757c';\n          text_color = 'white';\n        }\n\n        if (!news.blocks.main.elements[0].assets.length == 0) {\n          const newsTitle = news.webTitle;\n          const newsDescription = news.blocks.body[0].bodyTextSummary;\n          const newsImage = news.blocks.main.elements[0].assets[news.blocks.main.elements[0].assets.length - 1].file;\n          let newsDate = news.webPublicationDate;\n          newsDate = newsDate.slice(0, 10);\n          let newsShareUrl = news.webUrl;\n          let newsBadge = news.sectionId;\n          const newsId = news.id;\n          return React.createElement(Col, {\n            lg: 3,\n            sm: 12,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: {\n              pathname: '/detailedarticle/gua/' + newsId\n            },\n            style: {\n              width: '100%',\n              display: 'block',\n              textDecoration: 'none',\n              color: 'inherit'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 118\n            },\n            __self: this\n          }, React.createElement(Card, {\n            className: \"SearchCard\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 119\n            },\n            __self: this\n          }, React.createElement(Card.Body, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 120\n            },\n            __self: this\n          }, React.createElement(Card.Title, {\n            style: {\n              fontSize: '15px'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 121\n            },\n            __self: this\n          }, React.createElement(Truncate, {\n            lines: 2,\n            ellipsis: React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 121\n              },\n              __self: this\n            }, \"...\"),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 121\n            },\n            __self: this\n          }, newsTitle), React.createElement(Link, {\n            style: {\n              zIndex: '1',\n              position: 'relative',\n              textDecoration: 'none',\n              color: 'inherit',\n              height: '15px',\n              paddingLeft: '5px'\n            },\n            onClick: () => handleOpen(newsTitle, \"newsShareUrl\"),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 121\n            },\n            __self: this\n          }, React.createElement(IoMdShare, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 121\n            },\n            __self: this\n          }))), React.createElement(Card.Img, {\n            variant: \"top\",\n            src: newsImage,\n            className: \"SearchCardImg\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123\n            },\n            __self: this\n          }), React.createElement(Card.Text, {\n            className: \"mt-2\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }, React.createElement(\"em\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }, newsDate)), React.createElement(Badge, {\n            style: {\n              color: text_color,\n              backgroundColor: color\n            },\n            className: \"float-right\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }, newsBadge))))));\n        }\n      });\n      return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        style: {\n          marginLeft: '20px',\n          marginRight: '20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        style: {\n          marginTop: '3px',\n          marginBottom: '0px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Results\"), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, newsCards)), React.createElement(Modal, {\n        show: isopenModal,\n        onHide: () => handleClose(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, activeItem.title)), React.createElement(Modal.Body, {\n        style: {\n          marginTop: '1px',\n          marginBottom: '1px',\n          paddingBottom: '0px',\n          fontSize: '20px'\n        },\n        className: \"d-flex justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Share via\")), React.createElement(Modal.Body, {\n        className: \"d-flex justify-content-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(FacebookShareButton, {\n        url: activeItem.webUrl,\n        hashtag: \"CSCI_571_NewsApp\",\n        className: \"share\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(FacebookIcon, {\n        size: 70,\n        className: \"float-left\",\n        round: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })), React.createElement(TwitterShareButton, {\n        url: activeItem.webUrl,\n        hashtags: ['CSCI_571_NewsApp'],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(TwitterIcon, {\n        size: 70,\n        round: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      })), React.createElement(EmailShareButton, {\n        url: activeItem.webUrl,\n        subject: \"#CSCI_571_NewsApp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(EmailIcon, {\n        size: 70,\n        className: \"float-right\",\n        round: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      })))));\n    } // IF - Guardian\n    else if (props.whichNews == 'nytimes') {\n        if (searchResults) {\n          const newsCards = searchResults.map(news => {\n            let color = \"\";\n            let text_color = \"white\";\n\n            if (news.news_desk == 'sports' || news.news_desk == 'Sports') {\n              color = '#f6c244';\n              text_color = 'black';\n            } else if (news.news_desk == 'world' || news.news_desk == 'World') {\n              color = '#7c4eff';\n            } else if (news.news_desk == 'technology' || news.news_desk == 'Technology') {\n              color = '#cedc39';\n              text_color = 'black';\n            } else if (news.news_desk == 'politics' || news.news_desk == 'Politics') {\n              color = '#419488';\n            } else if (news.news_desk == 'business' || news.news_desk == 'Business') {\n              color = '#4696ec';\n            } else {\n              color = '#6e757c';\n              text_color = 'white';\n            }\n\n            let newsTitle = news.hasOwnProperty('multimedia') && news.hasOwnProperty('headline') ? news.headline.main : \"\";\n            let newsImage = [];\n\n            if (news.multimedia) {\n              if (news.hasOwnProperty('multimedia') && news.hasOwnProperty('headline') && news.multimedia.length != 0) {\n                let imageList = news.multimedia.filter(image => image.width >= 2000); // console.log(\"yes\", imageList)\n\n                newsImage = imageList.length == 0 ? [\"https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg\"] : ['https://static01.nyt.com/' + imageList[0].url]; // console.log(\"post\", imageList)\n              } else {\n                newsImage = [\"https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg\"];\n              }\n            } else {\n              newsImage = [\"https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg\"];\n            }\n\n            newsImage = newsImage[0];\n            let newsDate = news.pub_date;\n            newsDate = newsDate.slice(0, 10);\n            let articleUrl = news.web_url;\n            let newsId = news.web_url;\n            let newsShareUrl = news.web_url;\n            let newsBadge = news.news_desk;\n            return React.createElement(Col, {\n              lg: 3,\n              sm: 12,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 216\n              },\n              __self: this\n            }, React.createElement(Link, {\n              to: {\n                pathname: '/detailedarticle/nyt/' + newsId\n              },\n              style: {\n                width: '100%',\n                display: 'block',\n                textDecoration: 'none',\n                color: 'inherit'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 217\n              },\n              __self: this\n            }, React.createElement(Card, {\n              className: \"SearchCard\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 218\n              },\n              __self: this\n            }, React.createElement(Card.Body, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 219\n              },\n              __self: this\n            }, React.createElement(Card.Title, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 220\n              },\n              __self: this\n            }, React.createElement(\"em\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 220\n              },\n              __self: this\n            }, React.createElement(Truncate, {\n              lines: 2,\n              ellipsis: React.createElement(\"span\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 220\n                },\n                __self: this\n              }, \"...\"),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 220\n              },\n              __self: this\n            }, newsTitle)), React.createElement(Link, {\n              style: {\n                zIndex: '1',\n                position: 'relative',\n                backgroundColor: 'white',\n                border: 'none'\n              },\n              onClick: () => handleOpen(newsTitle, newsShareUrl),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 220\n              },\n              __self: this\n            }, React.createElement(IoMdShare, {\n              style: {\n                color: 'black'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 220\n              },\n              __self: this\n            }))), React.createElement(Card.Img, {\n              variant: \"top\",\n              src: newsImage,\n              className: \"SearchCardImg\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 221\n              },\n              __self: this\n            }), React.createElement(Card.Text, {\n              className: \"mt-2\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 222\n              },\n              __self: this\n            }, React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 223\n              },\n              __self: this\n            }, React.createElement(\"em\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 223\n              },\n              __self: this\n            }, newsDate)), React.createElement(Badge, {\n              style: {\n                color: text_color,\n                backgroundColor: color\n              },\n              className: \"float-right\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 224\n              },\n              __self: this\n            }, newsBadge))))));\n          }); // MAP\n\n          return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n            style: {\n              marginLeft: '20px',\n              marginRight: '20px'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 236\n            },\n            __self: this\n          }, React.createElement(\"h2\", {\n            style: {\n              marginTop: '3px',\n              marginBottom: '0px'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 237\n            },\n            __self: this\n          }, \"Results\"), React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 238\n            },\n            __self: this\n          }, newsCards)), React.createElement(Modal, {\n            show: isopenModal,\n            onHide: () => handleClose(),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 242\n            },\n            __self: this\n          }, React.createElement(Modal.Header, {\n            closeButton: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 243\n            },\n            __self: this\n          }, React.createElement(Modal.Title, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 244\n            },\n            __self: this\n          }, activeItem.title)), React.createElement(Modal.Body, {\n            style: {\n              marginTop: '1px',\n              marginBottom: '1px',\n              paddingBottom: '0px',\n              fontSize: '20px'\n            },\n            className: \"d-flex justify-content-center\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 246\n            },\n            __self: this\n          }, React.createElement(\"b\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 246\n            },\n            __self: this\n          }, \"Share via\")), React.createElement(Modal.Body, {\n            className: \"d-flex justify-content-between\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 247\n            },\n            __self: this\n          }, React.createElement(FacebookShareButton, {\n            url: activeItem.webUrl,\n            hashtag: \"CSCI_571_NewsApp\",\n            className: \"share\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 248\n            },\n            __self: this\n          }, React.createElement(FacebookIcon, {\n            size: 70,\n            className: \"float-left\",\n            round: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 249\n            },\n            __self: this\n          })), React.createElement(TwitterShareButton, {\n            url: activeItem.webUrl,\n            hashtags: ['CSCI_571_NewsApp'],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 251\n            },\n            __self: this\n          }, React.createElement(TwitterIcon, {\n            size: 70,\n            round: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 252\n            },\n            __self: this\n          })), React.createElement(EmailShareButton, {\n            url: activeItem.webUrl,\n            subject: \"#CSCI_571_NewsApp\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 254\n            },\n            __self: this\n          }, React.createElement(EmailIcon, {\n            size: 70,\n            className: \"float-right\",\n            round: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 255\n            },\n            __self: this\n          })))));\n        } // Data Present\n        else {\n            return React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 263\n              },\n              __self: this\n            }, \"No Results\");\n          }\n      }\n  } // Main else\n\n}; // Function\n\n\nconst mapStateToProps = state => {\n  return {\n    whichNews: state.newsState\n  };\n};\n\nexport default connect(mapStateToProps)(memo(SearchResults));","map":{"version":3,"sources":["/Users/prashanthpujar/Documents/Coursework/Web Technologies/Assignments/Homework 6/Backups/Experiment/client/src/components/searchResults.js"],"names":["React","useState","useEffect","memo","Card","Col","Row","Badge","Modal","Button","Link","axios","BounceLoader","FacebookShareButton","TwitterShareButton","EmailShareButton","EmailIcon","FacebookIcon","TwitterIcon","IoMdShare","connect","SearchResults","props","searchResults","setResults","newsAvailable","setNewsAvailable","activeItem","getActiveItem","isopenModal","changeModalState","fetchData","whichNews","url","match","params","option","get","then","responseData","data","catch","console","log","docs","handleClose","handleOpen","title","weburl","sharedata","webUrl","position","top","left","display","background","fontSize","newsCards","map","news","color","text_color","sectionId","blocks","main","elements","assets","length","newsTitle","webTitle","newsDescription","body","bodyTextSummary","newsImage","file","newsDate","webPublicationDate","slice","newsShareUrl","newsBadge","newsId","id","pathname","width","textDecoration","zIndex","height","paddingLeft","backgroundColor","marginLeft","marginRight","marginTop","marginBottom","paddingBottom","news_desk","hasOwnProperty","headline","multimedia","imageList","filter","image","pub_date","articleUrl","web_url","border","mapStateToProps","state","newsState"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, memo } from 'react'\nimport {Card, Col, Row, Badge, Modal, Button} from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport './search.css';\nimport './detailed_page.css';\nimport axios from 'axios';\nimport BounceLoader from \"react-spinners/BounceLoader\";\nimport {FacebookShareButton, TwitterShareButton, EmailShareButton} from 'react-share';\nimport {EmailIcon,FacebookIcon,TwitterIcon} from 'react-share';\nimport {IoMdShare} from 'react-icons/io'\nimport { connect } from 'react-redux';\n\nconst SearchResults = props => {\n    const [searchResults, setResults] = useState([])\n    const [newsAvailable, setNewsAvailable] = useState(false) \n    const [activeItem, getActiveItem] = useState(\"\")\n    const [isopenModal, changeModalState] = useState(false)\n    // const [searchWord, setSearchWord] = useState(\"\")\n\n    // setSearchWord(searchWord)\n    const fetchData = () => {\n        if(props.whichNews  === 'guardian' || props.whichNews === 'Guardian'){\n        let url = 'http://localhost:5000/searchResults/' + props.match.params.option\n        axios.get(url)\n        .then(responseData => {\n            setResults(responseData.data)\n            setNewsAvailable(true)\n\n        })\n        .catch(responseData=>{\n            console.log(\"ERROR from Search Results\");\n            })\n        }\n        else{\n        let url = 'http://localhost:5000/searchResults/nytimes/' + props.match.params.option\n        axios.get(url)\n        .then(responseData => {\n            // console.log(\"NYT search\", responseData.data.docs)\n            setResults(responseData.data.docs)\n            setNewsAvailable(true)\n\n        })\n        .catch(responseData=>{\n            console.log(\"ERROR from Search Results\");\n            })\n        }\n    }\n\n    useEffect(() => {\n        fetchData()\n    },[props.match.params.option])\n\n\n    // Handling modal for sharing\n\n    const handleClose = () =>{\n        changeModalState(false)\n    }\n\n    const handleOpen = (title, weburl) =>{\n        console.log(\"Calling hanfleopen\")\n        let sharedata = {title:title,webUrl:weburl}\n        getActiveItem(sharedata)\n        changeModalState(true)\n    }\n\n\n        if (!newsAvailable){\n            return(\n                <div className=\"sweet-loading\" style = {{position:'fixed', top:'50%', left:'47%'}}>\n                        <BounceLoader\n                        style = {{display:'block', background:'#2b4fc4'}}\n                        size={35}\n                        color={\"#2b4fc4\"}\n                        />\n                    <span style={{position:'fixed',left:'46.5%', fontSize:'14px'}}>Loading</span>\n                </div>\n            )\n        }\n        else{\n        if(props.whichNews  === 'guardian' || props.whichNews === 'Guardian'){\n        const newsCards = searchResults.map(news => {\n                    // const newsBadge = news.sectionId.toUpperCase();\n                    let color = \"\"\n                    let text_color = \"white\"\n                    if(news.sectionId == 'sport' || news.sectionId == 'Sport'){\n                        color = '#f6c244';\n                        text_color = 'black';\n                    }\n                    else if(news.sectionId == 'world' || news.sectionId == 'World'){\n                        color = '#7c4eff';\n                    }\n                    else if(news.sectionId == 'technology' || news.sectionId == 'Technology'){\n                        color = '#cedc39';\n                        text_color = 'black';\n                    }\n                    else if(news.sectionId == 'politics' || news.sectionId == 'Politics'){\n                        color = '#419488';\n                    }\n                    else if(news.sectionId == 'business'|| news.sectionId == 'Business'){\n                        color = '#4696ec';\n                    }\n                    else {\n                        color = '#6e757c';\n                        text_color = 'white'\n                    }\n                    if(!news.blocks.main.elements[0].assets.length == 0){\n                    const newsTitle = news.webTitle;\n                    const newsDescription = news.blocks.body[0].bodyTextSummary;\n                    const newsImage = news.blocks.main.elements[0].assets[news.blocks.main.elements[0].assets.length-1].file;\n                    let newsDate = news.webPublicationDate;\n                    newsDate = newsDate.slice(0,10)\n                    let newsShareUrl = news.webUrl;\n                    let newsBadge = news.sectionId\n                    const newsId = news.id;\n                    return (\n                        <Col lg={3} sm={12}>\n                            <Link to={{ pathname: '/detailedarticle/gua/' + newsId }} style={{ width:'100%', display:'block', textDecoration: 'none', color:'inherit' }}>\n                            <Card className=\"SearchCard\">\n                            <Card.Body>\n                            <Card.Title style={{fontSize:'15px'}}><Truncate lines={2} ellipsis={<span>...</span>}>{newsTitle}</Truncate><Link style={{zIndex:'1', position:'relative', textDecoration: 'none', color:'inherit',height:'15px', paddingLeft:'5px'}} onClick={()=>handleOpen(newsTitle, \"newsShareUrl\")}><IoMdShare/></Link>\n                            </Card.Title>\n                                <Card.Img variant=\"top\" src={newsImage} className=\"SearchCardImg\"/>\n                                <Card.Text className=\"mt-2\">\n                                    <span><em>{newsDate}</em></span>\n                                    <Badge style={{color:text_color, backgroundColor:color}} className=\"float-right\">\n                                        {newsBadge}\n                                    </Badge>\n                                </Card.Text>\n                            </Card.Body>\n                            </Card >\n                            </Link>\n                        </Col>\n                        )\n                    }\n                })\n        return (\n        <>\n        <div style={{marginLeft:'20px', marginRight:'20px'}}>\n                <h2 style={{marginTop:'3px', marginBottom:'0px'}}>Results</h2>\n                <Row>\n                    {newsCards}\n                </Row>\n        </div>\n        <Modal show={isopenModal} onHide={()=>handleClose()}>\n                <Modal.Header closeButton>\n                    <Modal.Title>{activeItem.title}</Modal.Title>\n                </Modal.Header>\n                <Modal.Body style={{marginTop:'1px',marginBottom:'1px', paddingBottom:'0px', fontSize:'20px'}} className=\"d-flex justify-content-center\"><b>Share via</b></Modal.Body>\n                <Modal.Body className=\"d-flex justify-content-between\">\n                <FacebookShareButton url={activeItem.webUrl} hashtag='CSCI_571_NewsApp' className=\"share\">\n                    <FacebookIcon size={70} className='float-left' round={true}/>\n                </FacebookShareButton>\n                <TwitterShareButton url={activeItem.webUrl} hashtags={['CSCI_571_NewsApp']}>\n                    <TwitterIcon size={70} round={true}/>\n                </TwitterShareButton>\n                <EmailShareButton url={activeItem.webUrl} subject='#CSCI_571_NewsApp'>\n                    <EmailIcon size={70} className='float-right' round={true}/>\n                </EmailShareButton>\n                </Modal.Body>\n        </Modal>\n        </>\n        );\n    } // IF - Guardian\n    else if(props.whichNews == 'nytimes'){\n        if(searchResults){\n            const newsCards = searchResults.map(news => {\n            let color = \"\"\n            let text_color = \"white\"\n            if(news.news_desk == 'sports'|| news.news_desk == 'Sports'){\n                color = '#f6c244';\n                text_color = 'black';\n            }\n            else if(news.news_desk == 'world' || news.news_desk == 'World'){\n                color = '#7c4eff';\n            }\n            else if(news.news_desk == 'technology' || news.news_desk == 'Technology'){\n                color = '#cedc39';\n                text_color = 'black';\n            }\n            else if(news.news_desk == 'politics' || news.news_desk == 'Politics'){\n                color = '#419488';\n            }\n            else if(news.news_desk == 'business' || news.news_desk == 'Business'){\n                color = '#4696ec';\n            }\n            else {\n                color = '#6e757c';\n                text_color = 'white'\n            }\n            let newsTitle =  news.hasOwnProperty('multimedia') && news.hasOwnProperty('headline')? news.headline.main : \"\"\n            let newsImage = []\n            if(news.multimedia){\n            if(news.hasOwnProperty('multimedia') && news.hasOwnProperty('headline') && news.multimedia.length!=0) {\n                    let imageList = news.multimedia.filter(image => image.width>=2000)\n                    // console.log(\"yes\", imageList)\n                    newsImage = imageList.length==0?[\"https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg\"]:['https://static01.nyt.com/'+imageList[0].url]\n                    // console.log(\"post\", imageList)\n            }\n            else{\n                newsImage = [\"https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg\"]\n            }\n        }\n        else{\n            newsImage = [\"https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg\"]\n        }\n\n        newsImage = newsImage[0]\n        let newsDate = news.pub_date\n        newsDate = newsDate.slice(0,10)\n        let articleUrl = news.web_url\n        let newsId = news.web_url\n        let newsShareUrl = news.web_url\n        let newsBadge = news.news_desk\n        return (\n            <Col lg={3} sm={12}>\n                <Link to={{ pathname: '/detailedarticle/nyt/' + newsId }} style={{ width:'100%', display:'block', textDecoration: 'none', color:'inherit' }}>\n                    <Card className=\"SearchCard\">\n                        <Card.Body>\n                            <Card.Title><em><Truncate lines={2} ellipsis={<span>...</span>}>{newsTitle}</Truncate></em><Link style={{zIndex:'1', position:'relative', backgroundColor:'white', border:'none'}} onClick={()=>handleOpen(newsTitle, newsShareUrl)}><IoMdShare style={{color:'black'}}/></Link></Card.Title>\n                            <Card.Img variant=\"top\" src={newsImage} className=\"SearchCardImg\"/>\n                            <Card.Text className=\"mt-2\">\n                                <span><em>{newsDate}</em></span>\n                                    <Badge style={{color:text_color, backgroundColor:color}} className=\"float-right\">\n                                        {newsBadge}\n                                    </Badge>\n                            </Card.Text>\n                        </Card.Body>\n                    </Card >\n                </Link>\n            </Col>\n            )\n        })// MAP\n        return (\n            <>\n            <div style={{marginLeft:'20px', marginRight:'20px'}}>\n                    <h2 style={{marginTop:'3px', marginBottom:'0px'}}>Results</h2>\n                    <Row>\n                        {newsCards}\n                    </Row>\n            </div>\n            <Modal show={isopenModal} onHide={()=>handleClose()}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>{activeItem.title}</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body style={{marginTop:'1px',marginBottom:'1px', paddingBottom:'0px', fontSize:'20px'}} className=\"d-flex justify-content-center\"><b>Share via</b></Modal.Body>\n                    <Modal.Body className=\"d-flex justify-content-between\">\n                        <FacebookShareButton url={activeItem.webUrl} hashtag='CSCI_571_NewsApp' className=\"share\">\n                            <FacebookIcon size={70} className='float-left' round={true}/>\n                        </FacebookShareButton>\n                        <TwitterShareButton url={activeItem.webUrl} hashtags={['CSCI_571_NewsApp']}>\n                            <TwitterIcon size={70} round={true}/>\n                        </TwitterShareButton>\n                        <EmailShareButton url={activeItem.webUrl} subject='#CSCI_571_NewsApp'>\n                            <EmailIcon size={70} className='float-right' round={true}/>\n                        </EmailShareButton>\n                    </Modal.Body>\n            </Modal>\n            </>\n            );\n        } // Data Present\n    else{\n        return(<div>No Results</div>)\n    }\n    \n    }\n    } // Main else\n} // Function\n\nconst mapStateToProps = (state) =>{\n    return{\n        whichNews : state.newsState\n    }\n}\n\n\n\nexport default connect(mapStateToProps)(memo(SearchResults));"]},"metadata":{},"sourceType":"module"}