{"ast":null,"code":"var _jsxFileName = \"/Users/prashanthpujar/Documents/Coursework/Web Technologies/Assignments/Homework 6/Backups/Experiment/client/src/components/home.js\";\nimport React, { useState, useEffect, memo, useRef } from 'react';\nimport './home.css';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Helper from './helper';\nimport Loader from './loading';\nimport Sharemodal from './shareModal';\n\nconst Home = props => {\n  const [newsAvailable, changeNewsState] = useState(\"Guardian\");\n  const [headlineNews, getNewsHeadlines] = useState([]);\n  const [isopenModal, changeModalState] = useState(false);\n  const [activeItem, getActiveItem] = useState(\"\"); // Fetch Data\n\n  const fetchData = () => {\n    if (props.whichNews === 'Guardian' || props.whichNews === 'guardian') {\n      axios.get('http://localhost:5000/guardian').then(responseData => {\n        getNewsHeadlines(responseData.data);\n        changeNewsState(\"Guardian\");\n      }).catch(responseData => {\n        console.log(\"error\");\n      });\n    } else if (props.whichNews === 'nytimes') {\n      axios.get('http://localhost:5000/nytimes').then(responseData => {\n        getNewsHeadlines(responseData.data);\n        changeNewsState(\"nytimes\");\n      }).catch(responseData => {\n        console.log(\"error\");\n      });\n    }\n  };\n\n  const handleClose = () => {\n    changeModalState(false);\n    console.log(\"closing\");\n  };\n\n  const handleOpen = (title, weburl) => {\n    let sharedata = {\n      title: title,\n      webUrl: weburl\n    };\n    getActiveItem(sharedata);\n    changeModalState(true);\n  }; // Function to clear data if previous state changed\n\n\n  const prevNews = usePrevious(props.whichNews);\n  console.log(\"Previous News\", prevNews);\n\n  function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n      if (prevNews != props.whichNews) {\n        getNewsHeadlines([]);\n        ref.current = value;\n        fetchData();\n      }\n    }); // Only re-run if value changes\n\n    return ref.current;\n  }\n\n  if (headlineNews.length == 0) {\n    return React.createElement(Loader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    });\n  } else {\n    if (props.whichNews === 'guardian' || props.whichNews === 'Guardian') {\n      if (headlineNews.length != 0 && headlineNews[0].hasOwnProperty('blocks')) {\n        return React.createElement(React.Fragment, null, React.createElement(Helper, {\n          newsData: headlineNews,\n          handleOpen: handleOpen,\n          news: \"guardian\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }), React.createElement(Sharemodal, {\n          isopenModal: isopenModal,\n          activeItem: activeItem,\n          handleClose: handleClose,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(Loader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        });\n      }\n    } else if (props.whichNews == 'nytimes') {\n      if (headlineNews.length != 0) {\n        return React.createElement(React.Fragment, null, React.createElement(Helper, {\n          newsData: headlineNews,\n          handleOpen: handleOpen,\n          news: \"nytimes\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }), React.createElement(Sharemodal, {\n          isopenModal: isopenModal,\n          activeItem: activeItem,\n          handleClose: handleClose,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(Loader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        });\n      } // Else NY Loading end\n\n    } // NY News end\n\n  } // Else end\n\n}; // Function end\n\n\nconst mapStateToProps = state => {\n  return {\n    whichNews: state.newsState\n  };\n};\n\nexport default connect(mapStateToProps)(memo(Home));","map":{"version":3,"sources":["/Users/prashanthpujar/Documents/Coursework/Web Technologies/Assignments/Homework 6/Backups/Experiment/client/src/components/home.js"],"names":["React","useState","useEffect","memo","useRef","axios","connect","Helper","Loader","Sharemodal","Home","props","newsAvailable","changeNewsState","headlineNews","getNewsHeadlines","isopenModal","changeModalState","activeItem","getActiveItem","fetchData","whichNews","get","then","responseData","data","catch","console","log","handleClose","handleOpen","title","weburl","sharedata","webUrl","prevNews","usePrevious","value","ref","current","length","hasOwnProperty","mapStateToProps","state","newsState"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, memo, useRef} from 'react'\nimport './home.css';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Helper from './helper'\nimport Loader from './loading'\nimport Sharemodal from './shareModal'\n\nconst Home = props =>{\n\n    const [newsAvailable, changeNewsState] = useState(\"Guardian\")\n    const [headlineNews, getNewsHeadlines] = useState([])\n    const [isopenModal, changeModalState] = useState(false)\n    const [activeItem, getActiveItem] = useState(\"\")\n\n    // Fetch Data\n    const fetchData=()=>{\n        if(props.whichNews === 'Guardian' || props.whichNews === 'guardian'){\n        axios.get('http://localhost:5000/guardian')\n        .then(responseData => {\n            getNewsHeadlines(responseData.data)\n            changeNewsState(\"Guardian\")\n        })\n        .catch(responseData=>{\n            console.log(\"error\");\n        })\n    }\n    else if(props.whichNews === 'nytimes'){\n        axios.get('http://localhost:5000/nytimes')\n        .then(responseData => {\n            getNewsHeadlines(responseData.data)\n            changeNewsState(\"nytimes\")\n        })\n        .catch(responseData=>{\n            console.log(\"error\");\n        })\n\n    }\n}\n\n    const handleClose = () =>{\n        changeModalState(false)\n        console.log(\"closing\")\n    }\n\n    const handleOpen = (title, weburl) =>{\n        let sharedata = {title:title,webUrl:weburl}\n        getActiveItem(sharedata)\n        changeModalState(true)\n    }\n\n    // Function to clear data if previous state changed\n\n    const prevNews = usePrevious(props.whichNews);\n    console.log(\"Previous News\",prevNews)\n    function usePrevious(value) {\n        const ref = useRef()\n        useEffect(() => {\n        if(prevNews != props.whichNews){\n           getNewsHeadlines([])\n          ref.current = value;\n          fetchData()}\n        }); // Only re-run if value changes\n        return ref.current;\n      }\n\n            if (headlineNews.length==0){\n                return(\n                    <Loader />\n                )\n            }\n            else{\n            if((props.whichNews === 'guardian' || props.whichNews === 'Guardian')){\n            if(headlineNews.length!=0 && headlineNews[0].hasOwnProperty('blocks')){\n                return (\n                    <>\n                        <Helper newsData={headlineNews} handleOpen={handleOpen} news=\"guardian\" />\n                        <Sharemodal isopenModal={isopenModal} activeItem={activeItem} handleClose={handleClose} />\n                    </>\n                    );\n                }\n            \n                else{\n                    return(\n                        <Loader />\n                    )\n            }\n\n}\n        else if(props.whichNews == 'nytimes'){\n        if(headlineNews.length!=0){\n            return (\n            <>\n                <Helper newsData={headlineNews} handleOpen={handleOpen} news=\"nytimes\" />\n                <Sharemodal isopenModal={isopenModal} activeItem={activeItem} handleClose={handleClose} />\n            </>\n            );\n        }\n        else{\n                return(\n                    <Loader />\n                    )\n            } // Else NY Loading end\n        } // NY News end\n    } // Else end\n} // Function end\n\n\nconst mapStateToProps = (state) =>{\n    return{\n        whichNews : state.newsState\n    }\n}\n\nexport default connect(mapStateToProps)(memo(Home));\n\n"]},"metadata":{},"sourceType":"module"}