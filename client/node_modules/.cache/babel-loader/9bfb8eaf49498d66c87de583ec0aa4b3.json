{"ast":null,"code":"import _slicedToArray from\"/Users/prashanthpujar/Documents/Coursework/Web Technologies/Assignments/Homework 6/Backups/Experiment/Main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,memo,useRef}from'react';import'./home.css';import axios from'axios';import{connect}from'react-redux';import Helper from'./helper';import Loader from'./loading';import Sharemodal from'./shareModal';var Politics=function Politics(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),politicsNews=_useState2[0],getPoliticsNews=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isopenModal=_useState4[0],changeModalState=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),activeItem=_useState6[0],getActiveItem=_useState6[1];// Fetch Data\nvar fetchData=function fetchData(){if(props.whichNews==='Guardian'||props.whichNews==='guardian'){axios.get('http://reactnodenewsapplication-env.eba-ni6taxhj.us-east-1.elasticbeanstalk.com/guardian/politics').then(function(responseData){getPoliticsNews(responseData.data);}).catch(function(responseData){console.log(\"error\");});}else if(props.whichNews==='nytimes'){axios.get('http://reactnodenewsapplication-env.eba-ni6taxhj.us-east-1.elasticbeanstalk.com/nytimes/politics').then(function(responseData){getPoliticsNews(responseData.data);}).catch(function(responseData){console.log(\"error\");});}};var handleClose=function handleClose(){changeModalState(false);console.log(\"closing\");};var handleOpen=function handleOpen(title,weburl){var sharedata={title:title,webUrl:weburl};getActiveItem(sharedata);changeModalState(true);};// Function to clear data if previous state changed\nvar prevNews=usePrevious(props.whichNews);console.log(\"Previous News\",prevNews);function usePrevious(value){var ref=useRef();useEffect(function(){if(prevNews!=props.whichNews){getPoliticsNews([]);ref.current=value;fetchData();}});// Only re-run if value changes\nreturn ref.current;}if(politicsNews.length==0){return React.createElement(Loader,null);}else{if(props.whichNews==='guardian'||props.whichNews==='Guardian'){if(politicsNews.length!=0&&politicsNews[0].hasOwnProperty('blocks')){return React.createElement(React.Fragment,null,React.createElement(Helper,{newsData:politicsNews,handleOpen:handleOpen,news:\"guardian\"}),React.createElement(Sharemodal,{isopenModal:isopenModal,activeItem:activeItem,handleClose:handleClose}));}else{return React.createElement(Loader,null);}}else if(props.whichNews=='nytimes'){if(politicsNews.length!=0){return React.createElement(React.Fragment,null,React.createElement(Helper,{newsData:politicsNews,handleOpen:handleOpen,news:\"nytimes\"}),React.createElement(Sharemodal,{isopenModal:isopenModal,activeItem:activeItem,handleClose:handleClose}));}else{return React.createElement(Loader,null);}// Else NY Loading end\n}// NY News end\n}// Else end\n};// Function end\nvar mapStateToProps=function mapStateToProps(state){return{whichNews:state.newsState};};export default connect(mapStateToProps)(memo(Politics));","map":{"version":3,"sources":["/Users/prashanthpujar/Documents/Coursework/Web Technologies/Assignments/Homework 6/Backups/Experiment/Main/client/src/components/politics.js"],"names":["React","useState","useEffect","memo","useRef","axios","connect","Helper","Loader","Sharemodal","Politics","props","politicsNews","getPoliticsNews","isopenModal","changeModalState","activeItem","getActiveItem","fetchData","whichNews","get","then","responseData","data","catch","console","log","handleClose","handleOpen","title","weburl","sharedata","webUrl","prevNews","usePrevious","value","ref","current","length","hasOwnProperty","mapStateToProps","state","newsState"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, memo, useRef} from 'react'\nimport './home.css';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Helper from './helper'\nimport Loader from './loading'\nimport Sharemodal from './shareModal'\n\nconst Politics = props =>{\n\n    const [politicsNews, getPoliticsNews] = useState([])\n    const [isopenModal, changeModalState] = useState(false)\n    const [activeItem, getActiveItem] = useState(\"\")\n\n    // Fetch Data\n    const fetchData=()=>{\n        if(props.whichNews === 'Guardian' || props.whichNews === 'guardian'){\n        axios.get('http://reactnodenewsapplication-env.eba-ni6taxhj.us-east-1.elasticbeanstalk.com/guardian/politics')\n        .then(responseData => {\n            getPoliticsNews(responseData.data)\n        })\n        .catch(responseData=>{\n            console.log(\"error\");\n        })\n    }\n    else if(props.whichNews === 'nytimes'){\n        axios.get('http://reactnodenewsapplication-env.eba-ni6taxhj.us-east-1.elasticbeanstalk.com/nytimes/politics')\n        .then(responseData => {\n            getPoliticsNews(responseData.data)\n        })\n        .catch(responseData=>{\n            console.log(\"error\");\n        })\n\n    }\n}\n\n    const handleClose = () =>{\n        changeModalState(false)\n        console.log(\"closing\")\n    }\n\n    const handleOpen = (title, weburl) =>{\n        let sharedata = {title:title,webUrl:weburl}\n        getActiveItem(sharedata)\n        changeModalState(true)\n    }\n\n    // Function to clear data if previous state changed\n\n    const prevNews = usePrevious(props.whichNews);\n    console.log(\"Previous News\",prevNews)\n    function usePrevious(value) {\n        const ref = useRef()\n        useEffect(() => {\n        if(prevNews != props.whichNews){\n           getPoliticsNews([])\n          ref.current = value;\n          fetchData()}\n        }); // Only re-run if value changes\n        return ref.current;\n      }\n\n            if (politicsNews.length==0){\n                return(\n                    <Loader />\n                )\n            }\n            else{\n            if((props.whichNews === 'guardian' || props.whichNews === 'Guardian')){\n            if(politicsNews.length!=0 && politicsNews[0].hasOwnProperty('blocks')){\n                return (\n                    <>\n                        <Helper newsData={politicsNews} handleOpen={handleOpen} news=\"guardian\" />\n                        <Sharemodal isopenModal={isopenModal} activeItem={activeItem} handleClose={handleClose} />\n                    </>\n                    );\n                }\n            \n                else{\n                    return(\n                        <Loader />\n                    )\n            }\n\n}\n        else if(props.whichNews == 'nytimes'){\n        if(politicsNews.length!=0){\n            return (\n            <>\n                <Helper newsData={politicsNews} handleOpen={handleOpen} news=\"nytimes\" />\n                <Sharemodal isopenModal={isopenModal} activeItem={activeItem} handleClose={handleClose} />\n            </>\n            );\n        }\n        else{\n                return(\n                    <Loader />\n                    )\n            } // Else NY Loading end\n        } // NY News end\n    } // Else end\n} // Function end\n\n\nconst mapStateToProps = (state) =>{\n    return{\n        whichNews : state.newsState\n    }\n}\n\nexport default connect(mapStateToProps)(memo(Politics));\n\n"]},"metadata":{},"sourceType":"module"}